{"ast":null,"code":"import { Deelnemer } from \"../../DomainLayer/Entities/Deelnemer\";\nimport Organisatie from \"../../DomainLayer/Entities/Organisatie\";\nimport Team from \"../../DomainLayer/Entities/Team\";\nexport function CreerOrganisatie(CreerOrganisatieDTO, ApplicationState) {\n  let newOrganisatie = new Organisatie(CreerOrganisatieDTO.naam, CreerOrganisatieDTO.plaats, new Date(CreerOrganisatieDTO.start), new Date(CreerOrganisatieDTO.einde));\n  ApplicationState.organisatie = newOrganisatie;\n  return {\n    status: ApplicationState.organisatie ? \"succes\" : \"fail\",\n    message: ApplicationState.organisatie ? \"Organisatie Created\" : \"Creation failed\",\n    organisatie: ApplicationState.organisatie ? {\n      naam: newOrganisatie.naam,\n      plaats: newOrganisatie.plaats,\n      start: newOrganisatie.start.toISOString(),\n      einde: newOrganisatie.einde.toISOString()\n    } : undefined\n  };\n}\n_c = CreerOrganisatie;\nexport function LoadOrganisatieFromFile(request, ApplicationState, FileSaver) {\n  try {\n    const loadedOrganisatie = FileSaver.load(request.path);\n\n    if (loadedOrganisatie && request.overwrite == true) {\n      ApplicationState.organisatie = loadedOrganisatie;\n      console.log(ApplicationState);\n      return {\n        status: \"succes\",\n        message: \"New Organisatie Loaded\",\n        organisatie: {\n          naam: loadedOrganisatie.naam,\n          plaats: loadedOrganisatie.plaats //start: loadedOrganisatie.start.toISOString(),\n          //einde: loadedOrganisatie.einde.toISOString(),\n\n        }\n      };\n    }\n  } catch (e) {\n    console.warn(e);\n    return {\n      status: \"failed\",\n      message: e\n    };\n  }\n}\n_c2 = LoadOrganisatieFromFile;\nexport function VerwijderOrganisatie() {}\n_c3 = VerwijderOrganisatie;\nexport function WijzigOrganisatie() {}\n_c4 = WijzigOrganisatie;\nexport function VerkrijgOrganisatie(ApplicationState) {\n  if (ApplicationState.organisatie != undefined) {\n    return {\n      naam: ApplicationState.organisatie.naam,\n      plaats: ApplicationState.organisatie.plaats,\n      start: ApplicationState.organisatie.start.toISOString(),\n      einde: ApplicationState.organisatie.einde.toISOString()\n    };\n  } else {\n    return undefined;\n  }\n}\n_c5 = VerkrijgOrganisatie;\nexport function SchrijfIn(request, ApplicationState) {\n  const organisatie = ApplicationState.organisatie;\n  const newDeelnemer = new Deelnemer(request.voornaam + \" \" + request.achternaam, request.club, request.categorie);\n\n  if (request.individueleWedstrijden !== undefined) {\n    request.individueleWedstrijden.forEach(wedstrijdKey => {\n      let wedstrijd = organisatie.inschrijvingen.get(wedstrijdKey.wedstrijd);\n      wedstrijd.schrijfIn([newDeelnemer], wedstrijdKey.rondes);\n    });\n  }\n\n  if (request.teamWedstrijden !== undefined && request.teamWedstrijden.length > 0) {\n    request.teamWedstrijden.forEach(teamWedstrijd => {\n      let wedstrijd = organisatie.inschrijvingen.get(teamWedstrijd.wedstrijd);\n      let teamGenoten = new Array();\n      teamWedstrijd.teamgenoten.forEach(teamGenoot => {\n        teamGenoten.push(new Deelnemer(teamGenoot.voornaam + \" \" + teamGenoot.achternaam, teamGenoot.club, teamGenoot.categorie));\n      });\n      let team = new Team(teamWedstrijd.categorie, \"1\", request.club, [newDeelnemer, ...teamGenoten]);\n      wedstrijd.schrijfIn([team], teamWedstrijd.rondes);\n    });\n  }\n}\n_c6 = SchrijfIn;\nexport function VerkrijgDeelnemers(applicationState) {\n  let organisatie = applicationState.organisatie;\n  let deelnemerArray = new Array();\n\n  for (let wedstrijdKey of organisatie.inschrijvingen.keys()) {\n    console.log(wedstrijdKey);\n    let deelnemers = organisatie.inschrijvingen.get(wedstrijdKey).verkrijgDeelnemers();\n    deelnemerArray.push(...deelnemers);\n  }\n\n  let noDuplicateDeelnemers = [...new Set(deelnemerArray)];\n  return noDuplicateDeelnemers;\n}\n_c7 = VerkrijgDeelnemers;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"CreerOrganisatie\");\n$RefreshReg$(_c2, \"LoadOrganisatieFromFile\");\n$RefreshReg$(_c3, \"VerwijderOrganisatie\");\n$RefreshReg$(_c4, \"WijzigOrganisatie\");\n$RefreshReg$(_c5, \"VerkrijgOrganisatie\");\n$RefreshReg$(_c6, \"SchrijfIn\");\n$RefreshReg$(_c7, \"VerkrijgDeelnemers\");","map":{"version":3,"sources":["/Users/bramsikkens/Documents/Ontwikkeling/Propaganda/PropagandaSysteem/src/ApplicationLayer/Organisatie/OrganisatieUseCases.ts"],"names":["Deelnemer","Organisatie","Team","CreerOrganisatie","CreerOrganisatieDTO","ApplicationState","newOrganisatie","naam","plaats","Date","start","einde","organisatie","status","message","toISOString","undefined","LoadOrganisatieFromFile","request","FileSaver","loadedOrganisatie","load","path","overwrite","console","log","e","warn","VerwijderOrganisatie","WijzigOrganisatie","VerkrijgOrganisatie","SchrijfIn","newDeelnemer","voornaam","achternaam","club","categorie","individueleWedstrijden","forEach","wedstrijdKey","wedstrijd","inschrijvingen","get","schrijfIn","rondes","teamWedstrijden","length","teamWedstrijd","teamGenoten","Array","teamgenoten","teamGenoot","push","team","VerkrijgDeelnemers","applicationState","deelnemerArray","keys","deelnemers","verkrijgDeelnemers","noDuplicateDeelnemers","Set"],"mappings":"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","sourcesContent":["import { Deelnemer } from \"../../DomainLayer/Entities/Deelnemer\";\nimport Organisatie from \"../../DomainLayer/Entities/Organisatie\";\nimport Race from \"../../DomainLayer/Entities/Race\";\nimport Team from \"../../DomainLayer/Entities/Team\";\nimport { Categorie } from \"../../DomainLayer/Enums/Categorie\";\nimport ApplicationState from \"../ApplicationState\";\nimport FileSaver from \"../FileSaver\";\nimport IPersistable from \"../IPersistable\";\nimport CreerOrganisatieDTO, {\n  LoadOrganisatieFromFileDTO,\n  SchrijfInRequest,\n  verkrijgOrganisatieDTO,\n} from \"./OrganisatieRequests\";\nimport { CreatedOrganisatieResponse } from \"./OrganisatieResponses\";\n\nexport function CreerOrganisatie(\n  CreerOrganisatieDTO: CreerOrganisatieDTO,\n  ApplicationState: ApplicationState\n): CreatedOrganisatieResponse {\n  let newOrganisatie: Organisatie = new Organisatie(\n    CreerOrganisatieDTO.naam,\n    CreerOrganisatieDTO.plaats,\n    new Date(CreerOrganisatieDTO.start),\n    new Date(CreerOrganisatieDTO.einde)\n  );\n\n  ApplicationState.organisatie = newOrganisatie;\n  return {\n    status: ApplicationState.organisatie ? \"succes\" : \"fail\",\n    message: ApplicationState.organisatie\n      ? \"Organisatie Created\"\n      : \"Creation failed\",\n    organisatie: ApplicationState.organisatie\n      ? {\n          naam: newOrganisatie.naam,\n          plaats: newOrganisatie.plaats,\n          start: newOrganisatie.start.toISOString(),\n          einde: newOrganisatie.einde.toISOString(),\n        }\n      : undefined,\n  };\n}\n\nexport function LoadOrganisatieFromFile(\n  request: LoadOrganisatieFromFileDTO,\n  ApplicationState: ApplicationState,\n  FileSaver:IPersistable\n) {\n  try {\n    const loadedOrganisatie: Organisatie = FileSaver.load(\n      request.path\n    );\n\n    if (loadedOrganisatie && request.overwrite == true) {\n      ApplicationState.organisatie = loadedOrganisatie;\n\n      console.log(ApplicationState);\n\n      return {\n        status: \"succes\",\n        message: \"New Organisatie Loaded\",\n        organisatie: {\n          naam: loadedOrganisatie.naam,\n          plaats: loadedOrganisatie.plaats,\n          //start: loadedOrganisatie.start.toISOString(),\n          //einde: loadedOrganisatie.einde.toISOString(),\n        },\n      };\n    }\n  } catch (e) {\n    console.warn(e);\n    return {\n      status: \"failed\",\n      message: e,\n    };\n  }\n}\n\nexport function VerwijderOrganisatie() {}\nexport function WijzigOrganisatie() {}\nexport function VerkrijgOrganisatie(\n  ApplicationState: ApplicationState\n): verkrijgOrganisatieDTO | undefined {\n  if (ApplicationState.organisatie != undefined) {\n    return {\n      naam: ApplicationState.organisatie.naam,\n      plaats: ApplicationState.organisatie.plaats,\n      start: ApplicationState.organisatie.start.toISOString(),\n      einde: ApplicationState.organisatie.einde.toISOString(),\n    };\n  } else {\n    return undefined;\n  }\n}\n\nexport function SchrijfIn(\n  request: SchrijfInRequest,\n  ApplicationState: ApplicationState\n) {\n  const organisatie: Organisatie = ApplicationState.organisatie;\n\n  const newDeelnemer: Deelnemer = new Deelnemer(\n    request.voornaam + \" \" + request.achternaam,\n    request.club,\n    request.categorie as Categorie\n  );\n\n  if (request.individueleWedstrijden !== undefined) {\n    request.individueleWedstrijden!.forEach((wedstrijdKey) => {\n      let wedstrijd: Race = organisatie.inschrijvingen.get(\n        wedstrijdKey.wedstrijd\n      )!;\n      wedstrijd.schrijfIn([newDeelnemer], wedstrijdKey.rondes);\n    });\n  }\n  if (\n    request.teamWedstrijden !== undefined &&\n    request.teamWedstrijden!.length > 0\n  ) {\n    request.teamWedstrijden.forEach((teamWedstrijd) => {\n      let wedstrijd: Race = organisatie.inschrijvingen.get(\n        teamWedstrijd.wedstrijd\n      )!;\n\n      let teamGenoten: Array<Deelnemer> = new Array();\n      teamWedstrijd.teamgenoten.forEach((teamGenoot) => {\n        teamGenoten.push(\n          new Deelnemer(\n            teamGenoot.voornaam + \" \" + teamGenoot.achternaam,\n            teamGenoot.club,\n            teamGenoot.categorie as Categorie\n          )\n        );\n      });\n\n      let team: Team = new Team(\n        teamWedstrijd.categorie as Categorie,\n        \"1\",\n        request.club,\n        [newDeelnemer, ...teamGenoten]\n      );\n\n      wedstrijd.schrijfIn([team], teamWedstrijd.rondes);\n    });\n  }\n}\n\nexport function VerkrijgDeelnemers(applicationState: ApplicationState) {\n  let organisatie = applicationState.organisatie;\n  let deelnemerArray: Array<Deelnemer> = new Array<Deelnemer>();\n\n  for (let wedstrijdKey of organisatie.inschrijvingen.keys()) {\n    console.log(wedstrijdKey);\n    let deelnemers: Array<Deelnemer> = organisatie.inschrijvingen\n      .get(wedstrijdKey)!\n      .verkrijgDeelnemers();\n\n    deelnemerArray.push(...deelnemers);\n  }\n\n  let noDuplicateDeelnemers = [...new Set(deelnemerArray)];\n  return noDuplicateDeelnemers;\n}\n"]},"metadata":{},"sourceType":"module"}