{"ast":null,"code":"import _initializerDefineProperty from \"/Users/bramsikkens/Documents/Ontwikkeling/Propaganda/propagandareact/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/bramsikkens/Documents/Ontwikkeling/Propaganda/propagandareact/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/bramsikkens/Documents/Ontwikkeling/Propaganda/propagandareact/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _class, _descriptor;\n\nimport { Type } from \"class-transformer\";\nimport { Categorie } from \"../Enums/Categorie\";\nimport { shuffleDeelnemersLijst, VoegInschrijvingenToe } from \"../utils\";\nimport { Deelnemer } from \"./Deelnemer\";\nimport { Reeks } from \"./Reeks\";\nimport Team from \"./Team\";\nlet Race = (_dec = Type(() => Reeks), (_class = class Race {\n  constructor(afstand, bootType, maxAantalBanen) {\n    _initializerDefineProperty(this, \"_reeksen\", _descriptor, this);\n\n    this._afstand = void 0;\n    this._bootType = void 0;\n    this._maxAantalBanen = void 0;\n    this._afstand = afstand;\n    this._bootType = bootType;\n\n    if (maxAantalBanen) {\n      this._maxAantalBanen = maxAantalBanen;\n    }\n  }\n\n  verkrijgDeelnemers() {\n    let deelnemerArray = [];\n    let alleReeksen = this.verkrijgReeksen([...this._reeksen.keys()]);\n    console.log(\"allereeksen\", alleReeksen);\n    alleReeksen.forEach(reeks => {\n      reeks.baanVerdeling.forEach((value, key) => {\n        if (value instanceof Deelnemer) {\n          deelnemerArray.push(value);\n        } else if (value instanceof Team) {\n          value._team.forEach(deelnemer => {\n            deelnemerArray.push(deelnemer);\n          });\n        }\n      });\n    }); //filter\n\n    deelnemerArray = deelnemerArray.filter((item, pos) => {\n      return deelnemerArray.indexOf(item) == pos;\n    });\n    return deelnemerArray;\n  }\n\n  verkrijgReeksen(rondes) {\n    let reeksenArray = new Array();\n    rondes.forEach(ronde => {\n      if (this._reeksen.has(ronde)) {\n        let reeksenInRonde = this._reeksen.get(ronde);\n\n        for (let key of reeksenInRonde.keys()) {\n          let reeksen = reeksenInRonde.get(key);\n          reeksenArray.push(...reeksen);\n        }\n      }\n    });\n    return reeksenArray;\n  }\n\n  verkrijgRondes() {\n    return Array.from(this._reeksen.keys());\n  }\n\n  creerRonde(title, deelnemers, maxAantalBanen) {\n    this._reeksen.set(title, new Map()); // if (deelnemers) {\n    //   this.schrijfIn(deelnemers, [title], maxAantalBanen);\n    // }\n\n  }\n\n  schrijfIn(deelnemers, rondes, maxAantalBanen) {\n    rondes.forEach(ronde => {\n      if (!this._reeksen.has(ronde)) {\n        throw Error(\"Ronde bestaat niet\");\n      } else {\n        let existingInschrijvingen = this._reeksen.get(ronde);\n\n        this._reeksen.set(ronde, VoegInschrijvingenToe(shuffleDeelnemersLijst(deelnemers), existingInschrijvingen, maxAantalBanen));\n      }\n    });\n  }\n\n  schrijfUit(id, rondes) {\n    rondes.forEach(ronde => {\n      if (!this._reeksen.has(ronde)) {\n        throw Error(\"Ronde bestaat niet\");\n      } else {\n        for (let key in Categorie) {\n          var _this$_reeksen$get, _this$_reeksen$get$ge;\n\n          (_this$_reeksen$get = this._reeksen.get(ronde)) === null || _this$_reeksen$get === void 0 ? void 0 : (_this$_reeksen$get$ge = _this$_reeksen$get.get(key)) === null || _this$_reeksen$get$ge === void 0 ? void 0 : _this$_reeksen$get$ge.forEach((reeks, index) => {\n            reeks.removeDeelnemer(id);\n          });\n        }\n      }\n    });\n  }\n\n}, (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"_reeksen\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return new Map();\n  }\n})), _class));\nexport { Race as default };","map":{"version":3,"sources":["/Users/bramsikkens/Documents/Ontwikkeling/Propaganda/PropagandaSysteem/src/DomainLayer/Entities/Race.ts"],"names":["Type","Categorie","shuffleDeelnemersLijst","VoegInschrijvingenToe","Deelnemer","Reeks","Team","Race","constructor","afstand","bootType","maxAantalBanen","_afstand","_bootType","_maxAantalBanen","verkrijgDeelnemers","deelnemerArray","alleReeksen","verkrijgReeksen","_reeksen","keys","console","log","forEach","reeks","baanVerdeling","value","key","push","_team","deelnemer","filter","item","pos","indexOf","rondes","reeksenArray","Array","ronde","has","reeksenInRonde","get","reeksen","verkrijgRondes","from","creerRonde","title","deelnemers","set","Map","schrijfIn","Error","existingInschrijvingen","schrijfUit","id","index","removeDeelnemer"],"mappings":"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","sourcesContent":["import { Type } from \"class-transformer\";\nimport RaceEntry from \"../Abstracts/RaceEntry\";\nimport { BootType } from \"../Enums/BootType\";\nimport { Categorie } from \"../Enums/Categorie\";\nimport { shuffleDeelnemersLijst, VoegInschrijvingenToe } from \"../utils\";\nimport { Deelnemer } from \"./Deelnemer\";\nimport { Reeks } from \"./Reeks\";\nimport Team from \"./Team\";\nimport util from \"util\";\n\nexport default class Race {\n  @Type(() => Reeks)\n  _reeksen: Map<string, Map<Categorie, Array<Reeks>>> = new Map();\n  _afstand: string;\n  _bootType: BootType;\n  _maxAantalBanen: number;\n\n  constructor(afstand: string, bootType: BootType, maxAantalBanen?: number) {\n    this._afstand = afstand;\n    this._bootType = bootType;\n\n    if (maxAantalBanen) {\n      this._maxAantalBanen = maxAantalBanen;\n    }\n  }\n\n  verkrijgDeelnemers(): Array<Deelnemer> {\n    let deelnemerArray: Array<Deelnemer> = [];\n    let alleReeksen: Array<Reeks> = this.verkrijgReeksen([\n      ...this._reeksen.keys(),\n    ]);\n\n    console.log(\"allereeksen\", alleReeksen);\n    alleReeksen.forEach((reeks: Reeks) => {\n      reeks.baanVerdeling.forEach((value: RaceEntry, key: number) => {\n        if (value instanceof Deelnemer) {\n          deelnemerArray.push(value as Deelnemer);\n        } else if (value instanceof Team) {\n          (value as Team)._team.forEach((deelnemer: Deelnemer) => {\n            deelnemerArray.push(deelnemer as Deelnemer);\n          });\n        }\n      });\n    });\n\n    \n    //filter\n    deelnemerArray = deelnemerArray.filter((item, pos) => {\n      return deelnemerArray.indexOf(item) == pos;\n    });\n\n    return deelnemerArray;\n  }\n\n  verkrijgReeksen(rondes: Array<string>): Array<Reeks> {\n    let reeksenArray: Array<Reeks> = new Array<Reeks>();\n    rondes.forEach((ronde: string) => {\n      if (this._reeksen.has(ronde)) {\n        let reeksenInRonde: Map<Categorie, Array<Reeks>> = this._reeksen.get(\n          ronde\n        )!;\n\n        for (let key of reeksenInRonde.keys()) {\n          let reeksen: Array<Reeks> = reeksenInRonde.get(key as Categorie)!;\n          reeksenArray.push(...reeksen);\n        }\n      }\n    });\n    return reeksenArray;\n  }\n\n  verkrijgRondes(): Array<string> {\n    return Array.from(this._reeksen.keys());\n  }\n\n  creerRonde(\n    title: string,\n    deelnemers?: Array<RaceEntry>,\n    maxAantalBanen?: number\n  ) {\n    this._reeksen.set(title, new Map<Categorie, Array<Reeks>>());\n    // if (deelnemers) {\n    //   this.schrijfIn(deelnemers, [title], maxAantalBanen);\n    // }\n  }\n\n  schrijfIn(\n    deelnemers: Array<RaceEntry>,\n    rondes: Array<string>,\n    maxAantalBanen?: number\n  ) {\n    rondes.forEach((ronde: string) => {\n      if (!this._reeksen.has(ronde)) {\n        throw Error(\"Ronde bestaat niet\");\n      } else {\n        let existingInschrijvingen = this._reeksen.get(ronde);\n\n        this._reeksen.set(\n          ronde,\n          VoegInschrijvingenToe(\n            shuffleDeelnemersLijst(deelnemers),\n            existingInschrijvingen,\n            maxAantalBanen\n          )\n        );\n      }\n    });\n  }\n\n  schrijfUit(id: string, rondes: [string]) {\n    rondes.forEach((ronde: string) => {\n      if (!this._reeksen.has(ronde)) {\n        throw Error(\"Ronde bestaat niet\");\n      } else {\n        for (let key in Categorie) {\n          this._reeksen\n            .get(ronde)\n            ?.get(key as Categorie)\n            ?.forEach((reeks: Reeks, index) => {\n              reeks.removeDeelnemer(id);\n            });\n        }\n      }\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}